<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Intranet Acqua</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet"> <!-- Font Awesome -->

</head>
<body style="background-color: #e5e5e5;">

<!-- üîù NAVBAR -->
<nav class="navbar navbar-expand-lg navbar-light bg-light shadow-sm" style="position: relative; z-index: 1050; font-family: 'Poppins', sans-serif;">
  <div class="container-fluid">
    <a class="navbar-brand" href="/">
      <img src="{{ url_for('static', filename='img/logo_acqua.png') }}" alt="Logo" width="150">
    </a>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
      <ul class="navbar-nav">

        <!-- Menu suspenso 1 -->
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">Servi√ßos</a>
          <ul class="dropdown-menu" style="background-color: #207D9E; box-shadow: 0 4px 8px rgba(0,0,0,0.1); border-radius: 6px;">

        <li>
          <a class="dropdown-item" href="https://psbengui.sistemasalutem.com.br:9004/hospitalar/#/login" 
            style="color: white !important; transition: background-color 0.3s;"
            onmouseover="this.style.backgroundColor='#555';" 
            onmouseout="this.style.backgroundColor='';">
            <img src="{{ url_for('static', filename='img/icon_salutem.svg') }}" 
                style="width: 16px; height: 16px; margin-right: 8px; vertical-align: middle;">
            Salutem
          </a>
        </li>

        <li>
          <a class="dropdown-item" href="https://laudos.mobilemed.com.br/login" 
            style="color: white !important; transition: background-color 0.3s;"
            onmouseover="this.style.backgroundColor='#555';" 
            onmouseout="this.style.backgroundColor='';">
            <img src="{{ url_for('static', filename='img/icon_dgs.svg') }}" 
                style="width: 16px; height: 16px; margin-right: 8px; vertical-align: middle;">
            Telerradiologia MobileMED
          </a>
        </li>

        <li>
          <a class="dropdown-item" href="https://sso.epimedmonitor.com/Account/Login?ReturnUrl" 
            style="color: white !important; transition: background-color 0.3s;"
            onmouseover="this.style.backgroundColor='#555';" 
            onmouseout="this.style.backgroundColor='';">
            <i class="fas fa-procedures" 
              style="width: 16px; height: 16px; margin-right: 8px; vertical-align: middle; display: inline-block;"></i>
            Epimed
          </a>
        </li>

        <li>
          <a class="dropdown-item" href="https://172.16.0.21:8443/sa/apps/cmn/LauncherLogin.jsp" 
            style="color: white !important; transition: background-color 0.3s;"
            onmouseover="this.style.backgroundColor='#555';" 
            onmouseout="this.style.backgroundColor='';">
            <i class="fas fa-network-wired" 
              style="width: 16px; height: 16px; margin-right: 8px; vertical-align: middle; display: inline-block;"></i>
            Interact
          </a>
        </li>

        <li>
          <a class="dropdown-item" href="https://medmaispara.uniexames.com.br/logins/login" 
            style="color: white !important; transition: background-color 0.3s;"
            onmouseover="this.style.backgroundColor='#555';" 
            onmouseout="this.style.backgroundColor='';">
            <img src="{{ url_for('static', filename='img/icon_med+.svg') }}" 
                style="width: 16px; height: 16px; margin-right: 8px; vertical-align: middle;">
            Med+ Diagn√≥stico & Imagem
          </a>
        </li>

       <li>
          <a class="dropdown-item" href="https://webmail.institutoacqua.org.br/" 
            style="color: white !important; transition: background-color 0.3s;"
            onmouseover="this.style.backgroundColor='#555';" 
            onmouseout="this.style.backgroundColor='';">
            <i class="fas fa-envelope" 
              style="width: 16px; height: 16px; margin-right: 8px; vertical-align: middle; display: inline-block;"></i>
            Webmail
          </a>
        </li>

        <li>
          <a class="dropdown-item" href="http://172.16.10.131:8000/" 
            style="color: white !important; transition: background-color 0.3s;"
            onmouseover="this.style.backgroundColor='#555';" 
            onmouseout="this.style.backgroundColor='';">
            <i class="fas fa-database" 
              style="width: 16px; height: 16px; margin-right: 8px; vertical-align: middle; display: inline-block;"></i>
            GTR - Gest√£o de Ticket Refei√ß√£o
          </a>
        </li>

      </ul>
        </li>

        <!-- Menu suspenso 2 -->
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">Abrir Chamados</a>
          <ul class="dropdown-menu" style="background-color: #207D9E; box-shadow: 0 4px 8px rgba(0,0,0,0.1); border-radius: 6px;">
            <li><a class="dropdown-item" href="http://glpi/glpi/front/central.php" style="color: white !important; transition: background-color 0.3s;" onmouseover="this.style.backgroundColor='#555';" 
            onmouseout="this.style.backgroundColor='';">TI</a></li>
            <li><a class="dropdown-item" href="http://glpi/manutencao/" style="color: white !important; transition: background-color 0.3s;" onmouseover="this.style.backgroundColor='#555';" 
            onmouseout="this.style.backgroundColor='';">Manuten√ß√£o</a></li>
            <li><a class="dropdown-item" href="https://mgmedical.neovero.com/login" style="color: white !important; transition: background-color 0.3s;" onmouseover="this.style.backgroundColor='#555';" 
            onmouseout="this.style.backgroundColor='';">Engenharia Clinica</a></li>
          </ul>
        </li>

        <!-- Menu suspenso 3 -->
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">EGS</a>
          <ul class="dropdown-menu" style="background-color: #207D9E; box-shadow: 0 4px 8px rgba(0,0,0,0.1); border-radius: 6px;">
            <li><a class="dropdown-item" href="https://sistema-egs.top/proj/login.php" style="color: white !important; transition: background-color 0.3s;" onmouseover="this.style.backgroundColor='#555';" 
            onmouseout="this.style.backgroundColor='';">Alimenta√ß√£o</a></li>
            <li><a class="dropdown-item" href="https://sistema-egs.top/rel/login.php" style="color: white !important; transition: background-color 0.3s;" onmouseover="this.style.backgroundColor='#555';" 
            onmouseout="this.style.backgroundColor='';">Relat√≥rios</a></li>
          </ul>
        </li>
        
        <!-- Link para o WhatsApp do TI -->
        <li class="nav-item d-flex align-items-center">
          <a href="#" target="_blank" class="nav-link text-success fw-bold">
            WhatsApp TI <i class="fab fa-whatsapp me-1"></i> 
          </a>
        </li>

        <!-- Bot√£o Login -->
        <li class="nav-item">
          <a class="btn btn-outline-primary ms-3" href="{{ url_for('login') }}">Login</a>
        </li>

      </ul>
    </div>
  </div>
</nav>

<!-- üì∞ Conte√∫do -->
<div class="container-fluid" style="padding-left: 15px; padding-right: 15px; margin-top: 20px;">
  <div class="row g-3">

    <!-- Comunicados da Empresa - col 7 -->
    <div class="col-md-6 px-0" style="margin-left: 0;">
      <div class="card shadow-sm">
        <div class="card-header" style="background-color: #3EB6AB; color: white;">
          <h5 class="mb-0">Comunicados</h5>
        </div>
        <div class="card-body" style="max-height: 670px; overflow-y: auto;">
            {% for post in posts %}
          <div style="background-color: #fbfbfb; border-radius: 12px; padding: 15px; margin-bottom: 15px;">
            <div class="d-flex align-items-start gap-3">
              {% if post[4] %}
                <img src="{{ url_for('static', filename=post[4]) }}" 
                  class="rounded" 
                  alt="Imagem do post" 
                  style="max-width: 400px; max-height: 300px; width: 100%; height: auto; object-fit: contain;">
              {% elif post[5] %}
                <video controls 
                      class="rounded" 
                      style="max-width: 400px; max-height: 300px; width: 100%; height: auto; object-fit: contain;">
                  <source src="{{ url_for('static', filename=post[5]) }}" type="video/mp4">
                  Seu navegador n√£o suporta v√≠deo.
                </video>
              {% endif %}

              <div class="flex-grow-1" style="display: flex; flex-direction: column; height: 100%; word-wrap: break-word; overflow-wrap: break-word; white-space: normal; max-width: calc(100% - 420px);">
                <h5 class="card-title">{{ post[0] }}</h5>
                <p class="card-text">{{ post[1] }}</p>
                <div class="d-flex justify-content-between" style="margin-top: auto;">
                  <small class="text-muted">Por: {{ post[3] }}</small>
                  <small class="text-muted">
                    {{ post[2].strftime("%d/%m/%Y %H:%M") if post[2] else '' }}
                  </small>
                </div>
              </div>
            </div>
          </div>
        {% endfor %}
        </div>
      </div>
    </div>

    <!-- üîó Lateral Direita -->
        <div class="col-md-6"> 

          <div class="d-flex flex-column gap-3">
            <div class="d-flex justify-content-between gap-3">
              <!-- Links R√°pidos -->
              <div class="w-50" style="max-height: 300px; overflow-y: auto;">           
                <div class="card bg-light h-100">
                    <div class="card-header" style="background-color: #3EB6AB; color: white;">
                    Links R√°pidos
                    </div>
                    <div class="card-body p-0" style="max-height: 400px; overflow-y: auto;">
                    <ul class="list-group list-group-flush">
                        {% for link in links %}
                        {% set icon_map = {
                            'forms': 'bi-file-earmark-text',
                            'slide': 'bi-file-earmark-ppt',
                            'doc': 'bi-file-earmark-word',
                            'pdf': 'bi-file-earmark-pdf',
                            'link': 'bi-link-45deg',
                            'video': 'bi-play-btn',
                            'default': 'bi-file-earmark'
                        } %}
                        {% set icon_class = icon_map.get(link[2], 'bi-file-earmark') %}
                        <li class="list-group-item d-flex align-items-center gap-2">
                        <i class="bi {{ icon_class }} fs-5 text-primary"></i>
                        <a href="{{ link[1] }}" target="_blank" rel="noopener noreferrer">{{ link[0] }}</a>
                        </li>
                        {% endfor %}
                    </ul>
                    </div>
                </div>
              </div>
              <!-- Compliance -->
              <div class="w-50" style="max-height: 300px; overflow-y: auto;">
                <div class="card h-100">
                  <div class="card-header" style="background-color: #3EB6AB; color: white;">
                    Compliance
                  </div>
                  <div class="card-body p-2">
                  {% if compliance|length > 0 %}
                    <div id="carouselCompliance" class="carousel slide" data-bs-ride="carousel" data-bs-interval="10000">
                      <!-- Indicators/dots -->
                      <div class="carousel-indicators">
                        {% for i in range(compliance|length) %}
                          <button type="button" data-bs-target="#carouselCompliance" data-bs-slide-to="{{ i }}" class="{% if i == 0 %}active{% endif %}" aria-current="{% if i == 0 %}true{% endif %}" aria-label="Slide {{ i + 1 }}"></button>
                        {% endfor %}
                      </div>

                      <!-- Slides -->
                      <div class="carousel-inner">
                        {% for item in compliance %}
                          <div class="carousel-item {% if loop.index0 == 0 %}active{% endif %}">
                            <img src="{{ url_for('static', filename=item[1]) }}" class="d-block mx-auto img-thumbnail" alt="Compliance" style="max-height: 230px; object-fit: contain;">
                          </div>
                        {% endfor %}
                      </div>

                      <!-- Controls -->
                      <button class="carousel-control-prev" type="button" data-bs-target="#carouselCompliance" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Anterior</span>
                      </button>
                      <button class="carousel-control-next" type="button" data-bs-target="#carouselCompliance" data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Pr√≥ximo</span>
                      </button>
                    </div>
                  {% else %}
                    <p class="text-muted text-center">Nenhuma imagem de compliance cadastrada.</p>
                  {% endif %}
                </div>
                </div>
              </div>
              <!-- Anivers√°rio-->
              <div class="w-50" style="max-height: 300px; overflow-y: auto;">
                <div style="max-height: 300px; overflow-y: auto;">
                  <div class="card h-100">
                    <div class="card-header" style="background-color: #3EB6AB; color: white;">
                      Aniversariantes do M√™s
                    </div>
                    <div class="card-body p-2">
                    {% if aniversariantes|length > 0 %}
                      <div id="carouselAniversariantes" class="carousel slide" data-bs-ride="carousel" data-bs-interval="10000">
                        <!-- Indicators/dots -->
                        <div class="carousel-indicators">
                          {% for i in range(aniversariantes|length) %}
                            <button type="button" data-bs-target="#carouselAniversariantes" data-bs-slide-to="{{ i }}" class="{% if i == 0 %}active{% endif %}" aria-current="{% if i == 0 %}true{% endif %}" aria-label="Slide {{ i + 1 }}"></button>
                          {% endfor %}
                        </div>

                        <!-- Slides -->
                        <div class="carousel-inner">
                          {% for aniversariante in aniversariantes %}
                            <div class="carousel-item {% if loop.index0 == 0 %}active{% endif %}">
                              <img src="{{ url_for('static', filename=aniversariante[1]) }}" class="d-block mx-auto img-thumbnail" alt="Aniversariante" style="max-height: 230px; object-fit: contain;">
                              <!-- Se quiser exibir nome, pode colocar aqui, ex: -->
                              <!-- <div class="carousel-caption d-none d-md-block">
                                <h5>{{ aniversariante[2] }}</h5>
                              </div> -->
                            </div>
                          {% endfor %}
                        </div>

                        <!-- Controls (opcional) -->
                        <button class="carousel-control-prev" type="button" data-bs-target="#carouselAniversariantes" data-bs-slide="prev">
                          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                          <span class="visually-hidden">Anterior</span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#carouselAniversariantes" data-bs-slide="next">
                          <span class="carousel-control-next-icon" aria-hidden="true"></span>
                          <span class="visually-hidden">Pr√≥ximo</span>
                        </button>
                      </div>
                    {% else %}
                      <p class="text-muted text-center">Nenhum aniversariante cadastrado.</p>
                    {% endif %}
                  </div>
                  </div>
                </div>
              </div>
            </div>  

            <!-- Not√≠cias Externas -->
            <div style="height: 270px;">
              <div class="card h-100 d-flex flex-column">
                <div class="card-header" style="background-color: #3EB6AB; color: white;">
                  Not√≠cias Externas
                </div>
                
                <!-- Scroll s√≥ aqui -->
                <div class="card-body p-2 overflow-auto" style="flex: 1;">
                  {% if noticias_externas %}
                    <div class="list-group">
                      {% for noticia in noticias_externas %}
                        <a href="{{ noticia.link }}" target="_blank" class="list-group-item list-group-item-action d-flex align-items-start gap-3">
                          {% if noticia.imagem %}
                            <img src="{{ url_for('static', filename=noticia.imagem) }}" alt="{{ noticia.titulo }}" style="width: 64px; height: 64px; object-fit: cover; border-radius: 0.25rem;">
                          {% else %}
                            <div style="width: 64px; height: 64px; background-color: #ccc; border-radius: 0.25rem; display: flex; align-items: center; justify-content: center; color: #666;">No Img</div>
                          {% endif %}
                          <div>
                            <h6 class="mb-1">{{ noticia.titulo }}</h6>
                            <small class="text-muted">{{ noticia.descricao[:100] }}{% if noticia.descricao|length > 100 %}...{% endif %}</small><br>
                            <small class="text-muted">Publicado em {{ noticia.data_publicacao.strftime('%d/%m/%Y') if noticia.data_publicacao else '' }}</small>
                          </div>
                        </a>
                      {% endfor %}
                    </div>
                  {% else %}
                    <p class="text-center text-muted">Nenhuma not√≠cia externa cadastrada.</p>
                  {% endif %}
                </div>
              </div>
            </div>

            <!-- Nova se√ß√£o com imagens link√°veis(metade da larguda terceiro nivel) -->
            <div class="row mt-4">
              <div class="col-md-6 mb-3">
                <a href="https://app.apontatu.com.br/credenciamento/login/" target="_blank">
                  <img src="{{ url_for('static', filename='img/logo_apontatu.png') }}"
                      alt="Descri√ß√£o imagem 1"
                      class="img-fluid rounded shadow-sm w-100 no-modal"
                      style="max-height: 180px; object-fit: cover;">
                </a>
              </div>

              <div class="col-md-6 mb-3">
                <a href="https://www.sciweb.com.br/" target="_blank">
                  <img src="{{ url_for('static', filename='img/logo_sciweb.png') }}"
                      alt="Descri√ß√£o imagem 2"
                      class="img-fluid rounded shadow-sm w-100 no-modal"
                      style="max-height: 180px; object-fit: cover;">
                </a>
              </div>
            </div>

        </div>

        
</div>
<!-- Modal para imagem ampliada -->
<div class="modal fade" id="imageModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content bg-transparent border-0">
      <div class="modal-body text-center p-0">
        <img src="" id="modalImage" class="img-fluid rounded shadow" alt="Imagem ampliada">
      </div>
    </div>
  </div>
</div>


<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    // Pega s√≥ as imagens que N√ÉO t√™m a classe 'no-modal'
    const imgs = document.querySelectorAll('img:not(.no-modal)');

    imgs.forEach(img => {
      img.addEventListener('click', function () {
        const src = this.getAttribute('src');
        const modalImg = document.getElementById('modalImage');
        modalImg.setAttribute('src', src);

        // Abre o modal
        const myModal = new bootstrap.Modal(document.getElementById('imageModal'));
        myModal.show();
      });
    });
  });
</script>

</body>
</html>
